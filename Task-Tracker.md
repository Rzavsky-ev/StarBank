# Task Tracker: Рекомендательная система банка «Стар»

## 1. Основные задачи (MVP)

### 1.1. Настройка инфраструктуры

- [ ] **#1** Подключить H2 (read-only) и PostgreSQL (R/W) базы данных
- [ ] **#2** Настроить JdbcTemplate для работы с H2
- [ ] **#3** Добавить Liquibase для миграций в PostgreSQL
- [ ] **#4** Конфигурация Spring Boot + Spring Data JPA

### 1.2. Реализация фиксированных правил

- [ ] **#5** Создать DTO для рекомендаций (`RecommendationResponse`)
- [ ] **#6** Реализовать `RecommendationRuleSet` интерфейс
- [ ] **#7** Написать SQL-запросы для проверки правил:
    - `USER_OF`
    - `TRANSACTION_SUM_COMPARE`
    - `TRANSACTION_SUM_COMPARE_DEPOSIT_WITHDRAW`
- [ ] **#8** Реализовать 3 фиксированных правила:
    - Invest 500
    - Top Saving
    - Простой кредит

### 1.3. REST API для рекомендаций

- [ ] **#9** Эндпоинт `GET /recommendation/{user_id}`
- [ ] **#10** Тесты для контроллера (MockMvc)

## 2. Динамические правила

### 2.1. Модель и API для динамических правил

- [ ] **#11** Сущность `DynamicRule` (JPA)
- [ ] **#12** Эндпоинты:
    - `POST /rule`
    - `GET /rule`
    - `DELETE /rule/{id}`
- [ ] **#13** Валидация JSON-правил

### 2.2. Интеграция с рекомендациями

- [ ] **#14** Проверка динамических правил в `RecommendationService`
- [ ] **#15** Объединение результатов (фиксированные + динамические)

## 3. Дополнительные задачи

### 3.1. Кеширование

- [ ] **#16** Добавить Caffeine Cache для SQL-запросов
- [ ] **#17** Эндпоинт для сброса кеша (`POST /management/clear-caches`)

### 3.2. Телеграм-бот

- [ ] **#18** Настроить бота (Telegram Bot API)
- [ ] **#19** Команда `/recommend {username}`
- [ ] **#20** Форматирование вывода

### 3.3. Статистика

- [ ] **#21** Сущность `RuleStatistic`
- [ ] **#22** Эндпоинт `GET /rule/stats`

### 3.4. Информация о сервисе

- [ ] **#23** Эндпоинт `/management/info` (версия из `pom.xml`)

## 4. Ветки Git

Основные ветки:

- `main` — стабильная версия
- `feature/*` — задачи (например, `feature/dynamic-rules`)
- `bugfix/*` — исправления

## 5. GitHub Issues

###24 Оптимизация SQL-запросов

###25 Добавить логирование

